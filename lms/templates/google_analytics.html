## This is the default for a microsite which does not have its own
<%!
from microsite_configuration import microsite
%>

% if settings.FEATURES.get('EDNX_ENABLE_GOOGLE_ANALYTICS', False):
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-42572285-6', 'auto', {'name': 'edunext', 'alwaysSendReferrer': true});
    ga('edunext.require', 'displayfeatures');
    ga('edunext.send', 'pageview');

  ## setting allows edunext to set up a secondary tracking code for GA
  % if microsite.get_value('additional_google_analytics', False):
    ga('create', '${ microsite.get_value('additional_google_analytics', '')}', 'auto');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
  % endif
  </script>
% endif
